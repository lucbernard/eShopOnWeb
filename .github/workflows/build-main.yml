name: eShopOnWeb Test composite workflow

on:
  push

jobs:
  setup:
    name: Setup
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: Echo
      run: echo "build-main"
    - name: Create temp file
      run: echo "Hello World" > temp.txt

  call-first-sub-workflow-passing-data:
    name: Call first sub-workflow passing data
    uses: ./.github/workflows/build-second.yml
    with:
      config-path: "config-path-values1"
    secrets: inherit # to forward secrets to the called workflow
    needs: setup

  call-second-sub-workflow-passing-data:
    name: Call second sub-workflow passing data
    uses: ./.github/workflows/build-third.yml
    with:
      config-path: "config-path-values2"
    secrets: inherit # to forward secrets to the called workflow
    needs: setup