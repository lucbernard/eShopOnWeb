name: eShopOnWeb Test composite workflow Secondary

on:
  workflow_call:
    inputs:
      config-path:
        required: true
        type: string
      force-rebuild-everything:
        description: 'Force rebuild everything'
        required: true
        default: false
        type: boolean
    secrets:
      TOKEN:
        required: true

jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Create temp file
        run: echo "Hello World from second" > temp.txt
      - name: Checkout
        run: echo "build-second"

      - name: Force rebuild everything
        if: ${{ inputs.force-rebuild-everything == true }}
        run: echo "force rebuild everything"

      - name: Don't Force rebuild everything
        if: ${{ inputs.force-rebuild-everything == false }}
        run: echo "DONT force rebuildeverything"
      - name: Inputs
        run: echo "${{ inputs.config-path }}"
      - name: Secrets
        run: echo "${{ secrets.token }}"
      - name: Test action
        id: test-action
        uses: ./.github/actions/hello-world
        with:
          who-to-greet: "Second"
      - name: Test hello.txt file content
        run: cat hello.txt
      - name: Echo test action output
        run: echo "${{ steps.test-action.outputs.random-number }}"
